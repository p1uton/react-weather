(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{31:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(1),a=n.n(c),i=n(8),s=n.n(i),o=n(2),u=n(3),l=n.n(u),d=n(5),j=function(t,e){var n=60*(new Date).getTimezoneOffset(),r=new Date(1e3*(t+e+n));return r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+", "+r.toLocaleDateString([],{day:"numeric",month:"short"})},p=function(t,e){var n=60*(new Date).getTimezoneOffset();return new Date(1e3*(t+e+n)).toLocaleDateString([],{weekday:"short",day:"numeric",month:"short"})},b=function(){var t=Object(d.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat("fd83f2e5d611298e3c7568537588009d"));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(d.a)(l.a.mark((function t(e,n){var r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(n,"&appid=").concat("fd83f2e5d611298e3c7568537588009d"));case 2:return r=t.sent,t.next=5,r.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(d.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&appid=").concat("fd83f2e5d611298e3c7568537588009d","&units=metric"));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O="ADD_CITY",x="REMOVE_CITY",m="SHOW_ERROR",y="HIDE_ERROR",v="SET_CITY",g=function(t){return{type:O,payload:t}},w=function(){return{type:m}},I=function(t){return{type:v,payload:t}},k=n(10),C=function(){var t=Object(o.b)(),e=function(){t({type:y})};return Object(r.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[Object(r.jsx)("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return e()},children:"\xd7"}),"City not found"]})},S=function(){var t=Object(c.useState)(""),e=Object(k.a)(t,2),n=e[0],a=e[1],i=Object(o.b)(),s=Object(o.c)((function(t){return t.error})),u=function(t){var e;t.preventDefault(),i((e=n,function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b(e);case 3:r=t.sent,n("id"in r?g(r):w()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(w());case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),a("")};return Object(r.jsxs)("div",{children:[Object(r.jsx)("form",{onSubmit:function(t){return u(t)},children:Object(r.jsxs)("div",{className:"input-group mb-3 pt-3",children:[Object(r.jsx)("input",{type:"text",className:"form-control",placeholder:"City",value:n,onChange:function(t){return a(t.target.value)}}),Object(r.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Add city"})]})}),s?Object(r.jsx)(C,{}):null]})},N=function(){var t=Object(o.c)((function(t){return t.cities})),e=Object(o.b)(),n=function(t){var n,r;e((n=t.coords.latitude,r=t.coords.longitude,function(){var t=Object(d.a)(l.a.mark((function t(e){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(n,r);case 3:c=t.sent,e("id"in c?g(c):w()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(w());case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))};0===t.length&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(n);return Object(r.jsxs)("div",{className:"list-group",children:[Object(r.jsx)(S,{}),t.map((function(t){return Object(r.jsxs)("button",{type:"button",className:"list-group-item list-group-item-action",onClick:function(){return n=t.id,void e(I(n));var n},children:[t.name,", ",t.country]},t.id)}))]})},_={0:Object(r.jsx)("span",{children:"\u2193"}),45:Object(r.jsx)("span",{children:"\u2199"}),90:Object(r.jsx)("span",{children:"\u2190"}),135:Object(r.jsx)("span",{children:"\u2196"}),180:Object(r.jsx)("span",{children:"\u2191"}),225:Object(r.jsx)("span",{children:"\u2197"}),270:Object(r.jsx)("span",{children:"\u2192"}),315:Object(r.jsx)("span",{children:"\u2198"}),360:Object(r.jsx)("span",{children:"\u2193"})},D=function(t){var e=t.weather,n=t.offset,c=45*Math.round(e.wind_deg/45);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(r.jsx)("div",{children:Object(r.jsx)("span",{style:{fontSize:"20px"},children:p(e.dt,n)})}),Object(r.jsxs)("div",{children:[Math.round(e.temp.day),"\xb0C / ",Math.round(e.temp.night),"\xb0C"]}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,".png"),alt:e.weather[0].main}),e.weather[0].main]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{style:{fontFamily:"Arial"},children:_[c]})," ",Math.round(e.wind_speed)," m/s"]})]}),Object(r.jsx)("hr",{})]})},M=function(t){var e=t.weather,n=45*Math.round(e.current.wind_deg/45);return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:j(e.current.dt,e.timezone_offset)}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsxs)("div",{style:{fontSize:"48px"},children:[Math.round(e.current.temp),"\xb0C"]}),Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.current.weather[0].icon,"@2x.png"),alt:e.current.weather[0].main})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:e.current.weather[0].main}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{style:{fontFamily:"Arial"},children:_[n]})," ",Math.round(e.current.wind_speed)," m/s"]})]})]}),Object(r.jsx)("hr",{}),e.daily.map((function(t){return Object(r.jsx)(D,{weather:t,offset:e.timezone_offset},t.dt)}))]})},E=function(){var t=Object(o.c)((function(t){return t.cityId})),e=Object(o.c)((function(e){return e.cities.find((function(e){return parseInt(e.id)===parseInt(t)}))})),n=Object(c.useState)(null),a=Object(k.a)(n,2),i=a[0],s=a[1];Object(c.useEffect)((function(){function t(){return(t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=5;break}return t.next=3,f(e);case 3:n=t.sent,s(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);var u=Object(o.b)(),j=function(t){u(function(t){return{type:x,payload:t}}(t)),u(I(null))};return Object(r.jsxs)("div",{className:"pt-3",children:[Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(r.jsx)("button",{className:"btn btn-link",onClick:function(){u(I(null))},children:"\u2190 Back"}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return j(t)},children:"Remove city"})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("h1",{children:[e.name,", ",e.country]}),null!==i?Object(r.jsx)(M,{weather:i}):Object(r.jsx)("div",{children:"Loading..."})]})},R=function(){var t=Object(o.c)((function(t){return t.cityId}));return Object(r.jsx)("div",{className:"container",children:null!==t?Object(r.jsx)(E,{}):Object(r.jsx)(N,{})})},T=n(17),z=n(4),A=n(6),J=n(16),L=(n(30),{cities:function(){try{var t=JSON.parse(localStorage.getItem("cities"));return null!==t?t:[]}catch(e){return[]}}(),error:!1,cityId:null}),Y=Object(A.c)((function(t,e){switch(e.type){case O:return Object(z.a)(Object(z.a)({},t),{},{cities:[].concat(Object(T.a)(t.cities),[{id:e.payload.id,name:e.payload.name,country:e.payload.sys.country,lat:e.payload.coord.lat,lon:e.payload.coord.lon}])});case x:return Object(z.a)(Object(z.a)({},t),{},{cities:t.cities.filter((function(t){return parseInt(t.id)!==parseInt(e.payload)}))});case m:return Object(z.a)(Object(z.a)({},t),{},{error:!0});case y:return Object(z.a)(Object(z.a)({},t),{},{error:!1});case v:return Object(z.a)(Object(z.a)({},t),{},{cityId:e.payload});default:return t}}),L,Object(A.a)(J.a));Y.subscribe((function(){!function(t){try{localStorage.setItem("cities",JSON.stringify(t))}catch(e){}}(Y.getState().cities)})),s.a.render(Object(r.jsx)(o.a,{store:Y,children:Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(R,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.f04af33b.chunk.js.map